digraph "cluster0web_server.py" {
	graph [compound=True fontname="DejaVu Sans Mono" label="web_server.py" pack=False rankdir=TB ranksep=0.02]
	node [fontname="DejaVu Sans Mono"]
	edge [fontname="DejaVu Sans Mono"]
	1 [label="\"\"\"\lA simple Web server.\lGET requests must name a specific file,\lsince it does not assume an index.html.\l\"\"\"\limport socket\limport threading\ldef handler(conn_socket: socket.socket, address: tuple[str, int]) ->None:...\ldef main() ->None:..." fillcolor="#FFFB81" shape=rectangle style="filled,solid"]
	57 [label="if __name__ == '__main__':" fillcolor="#FF6752" shape=diamond style="filled,solid"]
	58 [label="main()" fillcolor="#FFFB81" shape=rectangle style="filled,solid"]
	58 -> 60 [label=calls style=dashed]
	subgraph cluster_58 {
		graph [color=purple compound=true fontname="DejaVu Sans Mono" label="" rankdir=TB ranksep=0.02 shape=tab style=filled]
		node [fontname="DejaVu Sans Mono"]
		edge [fontname="DejaVu Sans Mono"]
		60 [label=main color="#E552FF" shape=tab style=filled]
	}
	57 -> 58 [label="__name__ == '__main__'" color=green]
	1 -> 57 [label="" color=black]
	subgraph cluster0handler {
		graph [compound=True fontname="DejaVu Sans Mono" label=handler pack=False rankdir=TB ranksep=0.02]
		node [fontname="DejaVu Sans Mono"]
		edge [fontname="DejaVu Sans Mono"]
		3 [label="\"\"\"\l    Handles the part of the client work-flow that is client-dependent,\l    and thus may be delayed by the user, blocking program flow.\l    \"\"\"" fillcolor="#FFFB81" shape=rectangle style="filled,solid"]
		4 [label="request = conn_socket.recv(1024).decode()
print(f\"\"\"Received request from {address}:
{request}\"\"\")
filepath = request.split()[1]" fillcolor=orange shape=Mdiamond style="filled,solid"]
		6 [label="" fillcolor="#FFFB81" shape=rectangle style="filled,solid"]
		7 [label="response_body = file.read()
response_header = 'HTTP/1.1 404 Not Found\r\n\r\n'
conn_socket.sendall(response_header.encode())
conn_socket.sendall(response_body)" fillcolor=orange shape=Mdiamond style="filled,solid"]
		9 [label="response_body = b'<html><body><h1>404 Not Found</h1></body></html>'\lresponse_header = 'HTTP/1.1 404 Not Found\r\n'\lconn_socket.sendall(response_header.encode())\lconn_socket.sendall(response_body)" fillcolor="#FFFB81" shape=rectangle style="filled,solid"]
		9 -> 10 [label=calls style=dashed]
		9 -> 12 [label=calls style=dashed]
		subgraph cluster_9 {
			graph [color=purple compound=true fontname="DejaVu Sans Mono" label="" rankdir=TB ranksep=0.02 shape=tab style=filled]
			node [fontname="DejaVu Sans Mono"]
			edge [fontname="DejaVu Sans Mono"]
			10 [label="conn_socket.sendall" color="#E552FF" shape=tab style=filled]
			11 [label="response_header.encode" color="#E552FF" shape=tab style=filled]
			10 -> 11 [color=black]
			12 [label="conn_socket.sendall" color="#E552FF" shape=tab style=filled]
		}
		8 [label="" fillcolor="#FFFB81" shape=rectangle style="filled,solid"]
		5 [label="conn_socket.close()" fillcolor="#FFFB81" shape=rectangle style="filled,solid"]
		5 -> 31 [label=calls style=dashed]
		subgraph cluster_5 {
			graph [color=purple compound=true fontname="DejaVu Sans Mono" label="" rankdir=TB ranksep=0.02 shape=tab style=filled]
			node [fontname="DejaVu Sans Mono"]
			edge [fontname="DejaVu Sans Mono"]
			31 [label="conn_socket.close" color="#E552FF" shape=tab style=filled]
		}
		8 -> 5 [label="" color=black]
		9 -> 8 [label="" color=black]
		7 -> 13 [label=calls style=dashed]
		7 -> 14 [label=calls style=dashed]
		7 -> 15 [label=calls style=dashed]
		7 -> 17 [label=calls style=dashed]
		subgraph cluster_7 {
			graph [color=purple compound=true fontname="DejaVu Sans Mono" label="" rankdir=TB ranksep=0.02 shape=tab style=filled]
			node [fontname="DejaVu Sans Mono"]
			edge [fontname="DejaVu Sans Mono"]
			13 [label=open color="#E552FF" shape=tab style=filled]
			14 [label="file.read" color="#E552FF" shape=tab style=filled]
			15 [label="conn_socket.sendall" color="#E552FF" shape=tab style=filled]
			16 [label="response_header.encode" color="#E552FF" shape=tab style=filled]
			15 -> 16 [color=black]
			17 [label="conn_socket.sendall" color="#E552FF" shape=tab style=filled]
		}
		7 -> 8 [label="" color=black]
		6 -> 7 [label="" color=black]
		18 [label="print(f'Bad request from {address}: {e}')" fillcolor="#FFFB81" shape=rectangle style="filled,solid"]
		18 -> 19 [label=calls style=dashed]
		subgraph cluster_18 {
			graph [color=purple compound=true fontname="DejaVu Sans Mono" label="" rankdir=TB ranksep=0.02 shape=tab style=filled]
			node [fontname="DejaVu Sans Mono"]
			edge [fontname="DejaVu Sans Mono"]
			19 [label=print color="#E552FF" shape=tab style=filled]
		}
		18 -> 5 [label="" color=black]
		4 -> 20 [label=calls style=dashed]
		4 -> 21 [label=calls style=dashed]
		4 -> 22 [label=calls style=dashed]
		subgraph cluster_4 {
			graph [color=purple compound=true fontname="DejaVu Sans Mono" label="" rankdir=TB ranksep=0.02 shape=tab style=filled]
			node [fontname="DejaVu Sans Mono"]
			edge [fontname="DejaVu Sans Mono"]
			20 [label="conn_socket.recv.decode" color="#E552FF" shape=tab style=filled]
			21 [label=print color="#E552FF" shape=tab style=filled]
			22 [label="request.split" color="#E552FF" shape=tab style=filled]
		}
		23 [label="if filepath == '/':" fillcolor="#FF6752" shape=diamond style="filled,solid"]
		24 [label="filepath = 'tests/web_files/index.html'" fillcolor="#FFFB81" shape=rectangle style="filled,solid"]
		25 [label="response_body = f.read()\lresponse_header = 'HTTP/1.1 200 OK\r\n\r\n'\lconn_socket.sendall(response_header.encode())\lconn_socket.sendall(response_body)" fillcolor="#FFFB81" shape=rectangle style="filled,solid"]
		25 -> 26 [label=calls style=dashed]
		25 -> 27 [label=calls style=dashed]
		25 -> 28 [label=calls style=dashed]
		25 -> 30 [label=calls style=dashed]
		subgraph cluster_25 {
			graph [color=purple compound=true fontname="DejaVu Sans Mono" label="" rankdir=TB ranksep=0.02 shape=tab style=filled]
			node [fontname="DejaVu Sans Mono"]
			edge [fontname="DejaVu Sans Mono"]
			26 [label=open color="#E552FF" shape=tab style=filled]
			27 [label="f.read" color="#E552FF" shape=tab style=filled]
			28 [label="conn_socket.sendall" color="#E552FF" shape=tab style=filled]
			29 [label="response_header.encode" color="#E552FF" shape=tab style=filled]
			28 -> 29 [color=black]
			30 [label="conn_socket.sendall" color="#E552FF" shape=tab style=filled]
		}
		25 -> 5 [label="" color=black]
		24 -> 25 [label="" color=black]
		23 -> 24 [label="filepath == '/'" color=green]
		23 -> 25 [label="(filepath != '/')" color=red]
		4 -> 23 [label="" color=black]
		3 -> 4 [label="" color=black]
	}
	subgraph cluster0main {
		graph [compound=True fontname="DejaVu Sans Mono" label=main pack=False rankdir=TB ranksep=0.02]
		node [fontname="DejaVu Sans Mono"]
		edge [fontname="DejaVu Sans Mono"]
		35 [label="server_socket = socket.socket(family=socket.AF_INET, type=socket.SOCK_STREAM)\lserver_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)\lserver_port = 6789\lserver_socket.bind(('0.0.0.0', server_port))\lserver_socket.listen(2)\lprint(f'Server started on port {server_port}, listening for connections...')\lthreads = []" fillcolor="#FFFB81" shape=rectangle style="filled,solid"]
		35 -> 36 [label=calls style=dashed]
		35 -> 37 [label=calls style=dashed]
		35 -> 38 [label=calls style=dashed]
		35 -> 39 [label=calls style=dashed]
		35 -> 40 [label=calls style=dashed]
		subgraph cluster_35 {
			graph [color=purple compound=true fontname="DejaVu Sans Mono" label="" rankdir=TB ranksep=0.02 shape=tab style=filled]
			node [fontname="DejaVu Sans Mono"]
			edge [fontname="DejaVu Sans Mono"]
			36 [label="socket.socket" color="#E552FF" shape=tab style=filled]
			37 [label="server_socket.setsockopt" color="#E552FF" shape=tab style=filled]
			38 [label="server_socket.bind" color="#E552FF" shape=tab style=filled]
			39 [label="server_socket.listen" color="#E552FF" shape=tab style=filled]
			40 [label=print color="#E552FF" shape=tab style=filled]
		}
		41 [label="try:" fillcolor=orange shape=Mdiamond style="filled,solid"]
		43 [label="print('Exception occurred (maybe you killed the server)')\lprint(e)" fillcolor="#FFFB81" shape=rectangle style="filled,solid"]
		43 -> 44 [label=calls style=dashed]
		43 -> 45 [label=calls style=dashed]
		subgraph cluster_43 {
			graph [color=purple compound=true fontname="DejaVu Sans Mono" label="" rankdir=TB ranksep=0.02 shape=tab style=filled]
			node [fontname="DejaVu Sans Mono"]
			edge [fontname="DejaVu Sans Mono"]
			44 [label=print color="#E552FF" shape=tab style=filled]
			45 [label=print color="#E552FF" shape=tab style=filled]
		}
		42 [label="server_socket.close()" fillcolor="#FFFB81" shape=rectangle style="filled,solid"]
		42 -> 54 [label=calls style=dashed]
		subgraph cluster_42 {
			graph [color=purple compound=true fontname="DejaVu Sans Mono" label="" rankdir=TB ranksep=0.02 shape=tab style=filled]
			node [fontname="DejaVu Sans Mono"]
			edge [fontname="DejaVu Sans Mono"]
			54 [label="server_socket.close" color="#E552FF" shape=tab style=filled]
		}
		43 -> 42 [label="" color=black]
		46 [label="while True:" fillcolor="#FFBE52" shape=hexagon style="filled,solid"]
		47 [label="conn_socket, client_address = server_socket.accept()\lprint(f'Connection established with {client_address}')\lnew_thread = threading.Thread(target=handler, args=(conn_socket,\l    client_address))\lnew_thread.start()\lthreads.append(new_thread)" fillcolor="#FFFB81" shape=rectangle style="filled,solid"]
		47 -> 49 [label=calls style=dashed]
		47 -> 50 [label=calls style=dashed]
		47 -> 51 [label=calls style=dashed]
		47 -> 52 [label=calls style=dashed]
		47 -> 53 [label=calls style=dashed]
		subgraph cluster_47 {
			graph [color=purple compound=true fontname="DejaVu Sans Mono" label="" rankdir=TB ranksep=0.02 shape=tab style=filled]
			node [fontname="DejaVu Sans Mono"]
			edge [fontname="DejaVu Sans Mono"]
			49 [label="server_socket.accept" color="#E552FF" shape=tab style=filled]
			50 [label=print color="#E552FF" shape=tab style=filled]
			51 [label="threading.Thread" color="#E552FF" shape=tab style=filled]
			52 [label="new_thread.start" color="#E552FF" shape=tab style=filled]
			53 [label="threads.append" color="#E552FF" shape=tab style=filled]
		}
		47 -> 46 [label="" color=black]
		46 -> 47 [label=True color=green]
		46 -> 42 [label="(False)" color=red]
		41 -> 46 [label="" color=black]
		35 -> 41 [label="" color=black]
	}
	subgraph cluster_KEY {
		graph [fontname="DejaVu Sans Mono" label=KEY]
		node [fontname="DejaVu Sans Mono"]
		edge [fontname="DejaVu Sans Mono"]
		input [fillcolor="#afeeee" shape=parallelogram style=filled]
		default [fillcolor="#FFFB81" shape=rectangle style=filled]
		if [fillcolor="#FF6752" shape=diamond style=filled]
		for [fillcolor="#FFBE52" shape=hexagon style=filled]
		while [fillcolor="#FFBE52" shape=hexagon style=filled]
		call [fillcolor="#E552FF" shape=tab style=filled]
		return [fillcolor="#98fb98" shape=parallelogram style=filled]
		try [fillcolor=orange shape=Mdiamond style=filled]
		raise [fillcolor="#98fb98" shape=house style=filled]
		if -> input [style=invis]
		input -> call [style=invis]
		for -> return [style=invis]
		return -> default [style=invis]
		try -> raise [style=invis]
	}
}
